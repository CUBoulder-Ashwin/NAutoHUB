{% extends "base.html" %}
{% block content %}

<h2 class="page-title">Add Device</h2>
<form method="POST" class="form-container">
    <div class="form-group">
        <label for="device_name" class="form-label">Device Name:</label>
        <input type="text" name="device_name" required class="form-input-small">
    </div>

    <div class="form-group">
        <label for="device_type" class="form-label">Device Type:</label>
        <select name="device_type" required class="form-input-small">
            <option value="router">Router</option>
            <option value="switch">Switch</option>
            <option value="server">Server</option>
        </select>
    </div>

    <div class="form-group">
        <label for="device_interface" class="form-label">Device Interface:</label>
        <input type="text" name="device_interface" required class="form-input-small">
    </div>

    <div class="form-group">
        <label for="mac_address" class="form-label">MAC Address for the new interface:</label>
        <input type="text" name="mac_address" required class="form-input-small">
    </div>

    <div class="form-group">
        <label for="ip_address" class="form-label">IPv4 address for the new device:</label>
        <input type="text" name="ip_address" class="form-input-small">
    </div>

    <div class="form-group">
        <label for="connected_device" class="form-label">Connected To (Device Name):</label>
        <input type="text" name="connected_device" required class="form-input-small">
    </div>

    <div class="form-group">
        <label for="connected_interface" class="form-label">Connected Interface:</label>
        <input type="text" name="connected_interface" required class="form-input-small">
    </div>

    <div class="form-group">
        <label for="connected_ip" class="form-label">Connected Interface IP with subnet (Default gateway):</label>
        <input type="text" name="connected_ip" class="form-input-small">
    </div>

    <div class="form-group checkbox-group">
        <label for="relay_toggle" class="checkbox-label">
            <input type="checkbox" id="relay_toggle" name="relay_toggle" class="switchport"> Make Connected Device a DHCP Relay
        </label>
    </div> 

    <div id="dhcp_fields" class="hidden">
        <div class="form-group">
            <label for="helper_ip" class="form-label">Helper Address IP:</label>
            <input type="text" name="helper_ip" class="form-input-small">
        </div>

        <div class="form-group">
            <label for="dhcp_server" class="form-label">DHCP Server Device:</label>
            <input type="text" name="dhcp_server" class="form-input-small">
        </div>

        <div class="form-group">
            <label for="new_subnet" class="form-label">New Subnet:</label>
            <input type="text" name="new_subnet" class="form-input-small">
        </div>

        <div class="form-group">
            <label for="range_lower" class="form-label">Range Lower Limit:</label>
            <input type="text" name="range_lower" class="form-input-small">
        </div>

        <div class="form-group">
            <label for="range_upper" class="form-label">Range Upper Limit:</label>
            <input type="text" name="range_upper" class="form-input-small">
        </div>

        <div class="form-group">
            <label for="default_gateway" class="form-label">Default Gateway:</label>
            <input type="text" name="default_gateway" class="form-input-small">
        </div>
    </div>

    <div class="form-group">
        <label for="sudo_password" class="form-label">Sudo Password:</label>
        <input type="password" name="sudo_password" id="sudo_password" required class="form-input-small">
        <div class="checkbox-label">
            <input type="checkbox" id="togglePassword" class="switchport"> Show Password
        </div>
    </div>

    <div class="form-group text-center">
        <button type="submit" class="form-button">Add Device</button>
    </div>
</form>

<script>
    document.getElementById('togglePassword').addEventListener('change', function() {
        var passwordField = document.getElementById('sudo_password');
        passwordField.type = this.checked ? 'text' : 'password';
    });

    document.getElementById('relay_toggle').addEventListener('change', function() {
        document.getElementById('dhcp_fields').style.display = this.checked ? 'block' : 'none';
    });
</script>

<style>
:root {
    --dark-bg: #0d0d0d;
    --dark-accent: #d4a373;
    --dark-hover: #eec68d;
    --light-bg: #fdf6e3;
    --light-accent: #8b5e3c;
    --light-hover: #b07c59;
}

body.light-mode {
    background-color: var(--light-bg);
    color: #2e2e2e;
}

body.dark-mode {
    background-color: var(--dark-bg);
    color: #e0e0e0;
}

/* General Styling */
.page-title {
    text-align: center;
    color: var(--dark-accent);
    font-family: 'Arial Black', sans-serif;
    margin-bottom: 20px;
}

.form-container {
    max-width: 500px;
    margin: 20px auto;
    background-color: inherit;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(212, 163, 115, 0.2);
}

.form-group {
    margin-bottom: 12px;
}

.form-label {
    display: block;
    color: var(--dark-accent);
    font-size: 1em;
    font-weight: bold;
    margin-bottom: 5px;
}

body.light-mode .form-label {
    color: var(--light-accent);
}

.form-input-small {
    width: 95%;
    padding: 8px;
    border: 1px solid var(--dark-accent);
    border-radius: 5px;
    background-color: #1a1a1a;
    color: inherit;
    outline: none;
    transition: border-color 0.3s;
}

body.light-mode .form-input-small {
    background-color: #fefaf4;
    border-color: var(--light-accent);
    color: #2e2e2e;
}

.form-input-small:focus {
    border-color: var(--dark-accent);
    box-shadow: 0 0 5px var(--dark-hover);
}

body.light-mode .form-input-small:focus {
    border-color: var(--light-accent);
    box-shadow: 0 0 5px var(--light-hover);
}

/* Select Dropdown Styling */
select.form-input-small {
    background-color: #1a1a1a;
    color: #ffffff;
    border: 1px solid var(--dark-accent);
}

body.light-mode select.form-input-small {
    background-color: #fefaf4;
    color: #2e2e2e;
    border-color: var(--light-accent);
}

.form-button {
    padding: 10px 20px;
    font-size: 14px;
    border-radius: 8px;
    background-color: var(--dark-accent);
    color: #ffffff;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s;
}

body.light-mode .form-button {
    background-color: var(--light-accent);
    color: #000000;
}

.form-button:hover {
    background-color: var(--dark-hover);
}

body.light-mode .form-button:hover {
    background-color: var(--light-hover);
}

.checkbox-label {
    color: var(--dark-accent);
    font-size: 1em;
}

body.light-mode .checkbox-label {
    color: var(--light-accent);
}

.switchport {
    accent-color: var(--dark-accent);
}

body.light-mode .switchport {
    accent-color: var(--light-accent);
}

.hidden {
    display: none;
}

.text-center {
    text-align: center;
}
</style>

{% endblock %}
